<div class="top-bar">
    <span>{{pageTranslationID + '.TITLE' | translate}}</span>
</div>
<div class="table-container mat-elevation-z4">
    <mat-accordion>
        <mat-expansion-panel expanded="true">
            <mat-expansion-panel-header>
                <mat-panel-title>
                    QR Code Subscription
                </mat-panel-title>
                <mat-panel-description>
                        <mat-label *ngIf="stripeSubscriptionsService.activeQrCodeSubscription" class="primary" style="text-align: right">{{stripeSubscriptionsService.stripeQrCodeSubscription.status}}</mat-label>
                    <mat-label *ngIf="!stripeSubscriptionsService.activeQrCodeSubscription" class="warn" style="text-align: right">no subscriptions</mat-label>
                </mat-panel-description>
            </mat-expansion-panel-header>
            <mat-list>
                <mat-list-item *ngIf="stripeSubscriptionsService.activeQrCodeSubscription">
                    <mat-divider></mat-divider>
                    <strong>{{'ID: '}}</strong>&nbsp;{{ stripeSubscriptionsService.stripeQrCodeSubscription.id}}
                    <button style="margin-left: auto"
                            mat-raised-button
                            color="accent"
                            (click)="cancelQrCodeSubscription()">{{pageTranslationID + '.LABEL.MANAGE_SUBSCRIPTION' | translate}}</button>
                </mat-list-item>
                <mat-list-item *ngIf="stripeSubscriptionsService.activeQrCodeSubscription">
                    <mat-divider></mat-divider>
                    <strong>{{'Period Start: '}}</strong>&nbsp;{{ stripeSubscriptionsService.stripeQrCodeSubscription.current_period_start*1000 | date}}
                </mat-list-item>
                <mat-list-item *ngIf="stripeSubscriptionsService.activeQrCodeSubscription">
                    <mat-divider></mat-divider>
                    <strong>{{'Period End: '}}</strong>&nbsp;{{ stripeSubscriptionsService.stripeQrCodeSubscription.current_period_end*1000 | date}}
                </mat-list-item>
                <mat-divider></mat-divider>
                <mat-list-item *ngIf="stripeSubscriptionsService.activeQrCodeSubscription">
                    <mat-divider></mat-divider>
                    <strong>{{'Usage this period: '}}</strong>&nbsp;{{ ' Used QrCode: ' + getQrCodeUsage().uniqueQrCodeScans + ' | Total Scans: ' + getQrCodeUsage().totalScans}}
                </mat-list-item>
                <mat-list-item *ngIf="!stripeSubscriptionsService.activeQrCodeSubscription">
                    <mat-divider></mat-divider>
                    {{pageTranslationID + '.LABEL.VIEW_PRICING' | translate}}:
                    <span class="spacer"></span>
                    <a mat-button target="_blank" href="https://qrsnapp.com/#pricing"

                            color="warn">{{'COMMON.ACTION.VIEW_PRICING' | translate}}</a>
                </mat-list-item>
            </mat-list>
        </mat-expansion-panel>
    </mat-accordion>
</div>
